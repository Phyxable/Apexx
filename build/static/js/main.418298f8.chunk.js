(this["webpackJsonpreact-express-starter"]=this["webpackJsonpreact-express-starter"]||[]).push([[0],{151:function(e,t,a){e.exports=a.p+"static/media/1on1_asset.81cf532f.svg"},153:function(e,t,a){e.exports=a.p+"static/media/MIC_ON.31971651.svg"},154:function(e,t,a){e.exports=a.p+"static/media/MIC_OFF.a7b26dd1.svg"},155:function(e,t,a){e.exports=a.p+"static/media/VIDEO_ON.b7de8bfe.svg"},156:function(e,t,a){e.exports=a.p+"static/media/VIDEO_OFF.10e9454f.svg"},157:function(e,t,a){e.exports=a.p+"static/media/ENDCALL.f27dcf5d.svg"},162:function(e,t,a){e.exports=a(333)},167:function(e,t,a){},215:function(e,t,a){},22:function(e,t,a){e.exports=a.p+"static/media/arrow_back.a0f523bd.svg"},220:function(e,t,a){},221:function(e,t,a){},222:function(e,t,a){},223:function(e,t,a){},225:function(e,t,a){},226:function(e,t,a){},333:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(147),i=a.n(r),o=(a(167),a(17)),l=a(337),c=a(340),d=a(341),m=a(48),u=a.n(m),h=a(22),p=a.n(h);a(168),a(334);const E=s.a.createContext(null),g=e=>t=>s.a.createElement(E.Consumer,null,a=>s.a.createElement(e,Object.assign({},t,{firebase:a})));var f=E;var v=a(10),b=(a(213),{apiKey:"AIzaSyA1K7neAnFpGJ8xBbGlkT-iakzV9OI0BOY",authDomain:"apexvideochat.firebaseapp.com",databaseURL:"https://apexvideochat.firebaseio.com",projectId:"apexvideochat",storageBucket:"apexvideochat.appspot.com",messagingSenderId:"376430197222",appId:"1:376430197222:web:f3156ada6e0415e57ebe27",measurementId:"G-PBXDB8NK9H"});var w=class{constructor(){this.doCreateUserWithEmailAndPassword=(e,t)=>this.auth.createUserWithEmailAndPassword(e,t),this.doSignInWithEmailAndPassword=(e,t)=>this.auth.signInWithEmailAndPassword(e,t),this.doSignInWithGoogle=()=>this.auth.signInWithPopup(this.googleProvider),this.doSignInWithFacebook=()=>this.auth.signInWithPopup(this.facebookProvider),this.doSignOut=e=>{this.auth.signOut()},this.doAddUId=e=>{this.uid=e},this.doGetUId=()=>this.uid,this.doPasswordReset=e=>this.auth.sendPasswordResetEmail(e),this.doPasswordUpdate=e=>this.auth.currentUser.updatePassword(e),this.user=e=>this.db.ref("users/".concat(e)),this.writeData=(e,t,a)=>{console.log("write data",e,t,a),this.db.ref("/users/".concat(e)).update({[t]:a}).then(()=>{console.log("write data proim")})},this.pushData=(e,t,a)=>{console.log("write data",e,t,a),this.db.ref("/users/".concat(e)).push({[t]:a}).then(()=>{console.log("push data proim")})},this.users=()=>this.db.ref("users"),v.default.initializeApp(b),this.functions=v.default.functions(),this.auth=v.default.auth(),this.db=v.default.database(),this.state={},this.uid="s",this.googleProvider=new v.default.auth.GoogleAuthProvider,this.facebookProvider=new v.default.auth.FacebookAuthProvider}doAddStripeID(e,t,a,n,s){v.default.functions().httpsCallable("addStripeID")({source:e,email:t,uid:a,planType:n,coupon:s}).then((function(e){console.log("add stripe result is ",e),e.data.success?(console.log("it works"),setInterval(()=>{window.location.assign("/payment-success")},3e3)):(console.log("nope"),setInterval(()=>{window.confirm("Payment Failed");window.location.reload()},3e3))})).catch(e=>{console.log(e.code)})}doAddPlusStripeID(e,t,a,n,s,r){v.default.functions().httpsCallable("addStripeID")({source:e,email:t,uid:a,planType:n,coupon:s,trial_end:r}).then((function(e){console.log("add stripe result is ",e),e.data.success?(console.log("it works"),setInterval(()=>{window.location.assign("/phyxable")},3e3)):(console.log("nope"),setInterval(()=>{window.location.assign("/payment-fail")},3e3))})).catch(e=>{console.log(e.code)})}doCancelStripeSubscription(e,t){console.log("do cancel stripe subscription",t),console.log(e),v.default.functions().httpsCallable("cancelStripeSubscription")({uid:e,stripeSubscriptionId:t}).then((function(e){console.log("cancel subscription result ",e)})).catch(e=>{console.log(e.code)})}doAddDataToUser(e,t,a){v.default.functions().httpsCallable("addDataToUser")({uid:e,key:t,value:a}).then((function(e){console.log("and the result is ",e)})).catch(e=>{console.log(e.code)})}doGetUserProfile(e){return this.db.ref("/users/".concat(e,"/userProfile")).once("value").then((function(e){return e.val()}))}},N=a(49),x=a.n(N),S=(a(215),a(19));class C extends n.Component{constructor(e){super(e)}render(){return s.a.createElement("div",{className:"center",style:{overflowX:"hidden"}},s.a.createElement("div",{className:"margin-top-16"},s.a.createElement("div",{className:"flex-row width-100vw"},s.a.createElement("div",{className:"flex-1",style:{maxWidth:"5vw"}}),s.a.createElement("div",{className:"flex-1"},s.a.createElement("div",{className:"flex-row",style:{width:"90vw"}},s.a.createElement("div",{className:"flex-1"},s.a.createElement("div",{className:"home-nav-bar-title  futura-20-300 center",style:{width:"80vw"}}),s.a.createElement("div",{className:"flex-1",style:{textAlign:"left"}},s.a.createElement("a",{href:"/"},s.a.createElement("img",{style:{width:"24px"},src:p.a})))))))),s.a.createElement("div",null,s.a.createElement("div",{className:"lead-text margin-top-16"},s.a.createElement("div",{style:{fontWeight:"bold"}},"APEX PATIENT SIGNUP"))),s.a.createElement("div",{className:"center flex-1"},s.a.createElement("div",{className:"inline-block"},s.a.createElement(O,null))),s.a.createElement("div",{style:{flex:.1}}))}}const P={username:"",lastname:"",email:"",passwordOne:"",passwordTwo:"",error:null};class y extends n.Component{constructor(e){super(e),this.onSubmit=e=>{const t=this.state,a=t.username,n=(t.lastname,t.email),s=t.passwordOne;this.props.firebase.doCreateUserWithEmailAndPassword(n,s).then(e=>(console.log("sign up submit called 2",localStorage.getItem("data4")),this.props.firebase.user(e.uid).update({joinDate:x()().format("YYYY/MM/DD"),userProfile:{name:a,email:n,accountType:"PATIENT"}}))).then(e=>{console.log("in on submit sign up",this.props),this.setState(Object(o.a)({},P)),this.setState({authRedirect:!0})}).catch(e=>{this.setState({error:e}),alert(e)}),e.preventDefault()},this.onChange=e=>{this.setState({[e.target.name]:e.target.value}),""===this.state.passwordOne||""===this.state.email||""===this.state.username?this.setState({colorChange:"#E1E2E3"}):this.setState({colorChange:"#FF5A66"})},this.handleTryFirstClick=()=>{this.setState({redirect:!0})},this.state=Object(o.a)({},P,{redirect:!1,colorChange:"#E1E2E3"})}render(){if(this.state.redirect)return s.a.createElement(d.a,{push:!0,to:"/demo-page-one"});this.state.authRedirect&&(window.location.href="/videochat");const e=this.state,t=e.username,a=(e.lastname,e.email),n=e.passwordOne,r=(e.passwordTwo,e.error,""===n||""===a||""===t);return s.a.createElement("form",null,s.a.createElement("div",{className:"center margin-top-32"},s.a.createElement("div",{className:"inline-block"},s.a.createElement("input",{name:"username",value:t,onChange:this.onChange,type:"text",placeholder:"Full Name"}),s.a.createElement("input",{name:"email",value:a,onChange:this.onChange,type:"text",placeholder:"Email Address"}),s.a.createElement(u.a,{id:"password",name:"passwordOne",value:n,onChange:this.onChange,type:"password",placeholder:"Password (6+ characters)",inputStyles:{padding:"8px",fontSize:"16px"},inputClassName:"PasswordMaskInput",buttonStyles:{width:"61px"}}))),s.a.createElement("div",{className:"margin-top-24"},s.a.createElement("button",{id:"noHover",onClick:e=>{this.onSubmit(e)},disabled:r,type:"submit",style:{backgroundColor:this.state.colorChange}},"SIGN UP")))}}const k=()=>s.a.createElement("p",{className:"center margin-top-16 futura-14-300"},"Don't have an account? ",s.a.createElement(l.a,{to:"/signup"},"Sign Up")),O=Object(S.a)(c.a,g)(y);var A=C;a(220);class I extends n.Component{render(){return s.a.createElement("div",{className:"center"},s.a.createElement("div",{className:"margin-top-16"},s.a.createElement("div",{className:"flex-row width-100vw"},s.a.createElement("div",{className:"flex-1",style:{maxWidth:"5vw"}}),s.a.createElement("div",{className:"flex-1"},s.a.createElement("div",{className:"flex-row",style:{width:"90vw"}},s.a.createElement("div",{className:"flex-1",style:{textAlign:"left"}},s.a.createElement("a",{href:"/"},s.a.createElement("img",{style:{width:"24px"},src:p.a}))),s.a.createElement("div",{className:"flex-1"},s.a.createElement("div",{className:"home-nav-bar-title futura-20-300 center",style:{width:"80vw"}})))))),s.a.createElement("div",{className:"lead-text margin-top-120"},"APEX PATIENT LOGIN"),s.a.createElement("div",{className:"center flex-1"},s.a.createElement("div",{className:"inline-block margin-top-16"},s.a.createElement(j,{updateUserProfile:this.props.updateUserProfile}))),s.a.createElement("div",{style:{flex:.1}}))}}const U={email:"",password:"",error:null};class T extends n.Component{constructor(e){super(e),this.onSubmit=e=>{console.log("sign in button pressed"),console.log(this.props);const t=this.state,a=t.email,n=t.password;this.props.firebase.doSignInWithEmailAndPassword(a,n).then(()=>{this.setState(Object(o.a)({},U)),this.props.history.push("/videochat")}).catch(e=>{this.setState({error:e})}),e.preventDefault()},this.onChange=e=>{this.setState({[e.target.name]:e.target.value})},this.state=Object(o.a)({},U)}render(){const e=this.state,t=e.email,a=e.password,n=e.error,r=""===a||""===t;return s.a.createElement("form",{onSubmit:this.onSubmit,className:"si-form margin-top-16"},s.a.createElement("input",{name:"email",value:t,onChange:this.onChange,type:"text",placeholder:"Email Address"}),s.a.createElement("input",{name:"password",value:a,onChange:this.onChange,type:"password",placeholder:"Password"}),s.a.createElement("button",{disabled:r,type:"submit signin-btn",className:"signin-btn"},"Sign In"),s.a.createElement(k,null),n&&s.a.createElement("p",null,n.message))}}const j=Object(S.a)(c.a,g)(T);var D=I;a(221);class R extends n.Component{constructor(e){super(e)}render(){return s.a.createElement("div",{className:"center",style:{overflowX:"hidden"}},s.a.createElement("div",{className:"margin-top-16"},s.a.createElement("div",{className:"flex-row width-100vw"},s.a.createElement("div",{className:"flex-1",style:{maxWidth:"5vw"}}),s.a.createElement("div",{className:"flex-1"},s.a.createElement("div",{className:"flex-row",style:{width:"90vw"}},s.a.createElement("div",{className:"flex-1"},s.a.createElement("div",{className:"home-nav-bar-title  futura-20-300 center",style:{width:"80vw"}}),s.a.createElement("div",{className:"flex-1",style:{textAlign:"left"}},s.a.createElement("a",{href:"/"},s.a.createElement("img",{style:{width:"24px"},src:p.a})))))))),s.a.createElement("div",null,s.a.createElement("div",{className:"lead-text margin-top-16"},s.a.createElement("div",{style:{fontWeight:"bold"}},"APEX PRACTITIONER SIGNUP"))),s.a.createElement("div",{className:"center flex-1"},s.a.createElement("div",{className:"inline-block"},s.a.createElement(G,null))),s.a.createElement("div",{style:{flex:.1}}))}}const W={username:"",lastname:"",email:"",passwordOne:"",passwordTwo:"",error:null};class F extends n.Component{constructor(e){super(e),this.onSubmit=e=>{const t=this.state,a=t.username,n=(t.lastname,t.email),s=t.passwordOne;this.props.firebase.doCreateUserWithEmailAndPassword(n,s).then(e=>(console.log("sign up submit called 2",localStorage.getItem("data4")),this.props.firebase.user(e.uid).update({joinDate:x()().format("YYYY/MM/DD"),userProfile:{name:a,email:n,accountType:"PRACTITIONER"}}))).then(e=>{console.log("in on submit sign up",this.props),this.setState(Object(o.a)({},W)),this.setState({authRedirect:!0})}).catch(e=>{this.setState({error:e}),alert(e)}),e.preventDefault()},this.onChange=e=>{this.setState({[e.target.name]:e.target.value}),""===this.state.passwordOne||""===this.state.email||""===this.state.username?this.setState({colorChange:"#E1E2E3"}):this.setState({colorChange:"#FF5A66"})},this.handleTryFirstClick=()=>{this.setState({redirect:!0})},this.state=Object(o.a)({},W,{redirect:!1,colorChange:"#E1E2E3"})}render(){if(this.state.redirect)return s.a.createElement(d.a,{push:!0,to:"/demo-page-one"});this.state.authRedirect&&(window.location.href="/videochat");const e=this.state,t=e.username,a=(e.lastname,e.email),n=e.passwordOne,r=(e.passwordTwo,e.error,""===n||""===a||""===t);return s.a.createElement("form",null,s.a.createElement("div",{className:"center margin-top-32"},s.a.createElement("div",{className:"inline-block"},s.a.createElement("input",{name:"username",value:t,onChange:this.onChange,type:"text",placeholder:"Full Name"}),s.a.createElement("input",{name:"email",value:a,onChange:this.onChange,type:"text",placeholder:"Email Address"}),s.a.createElement(u.a,{id:"password",name:"passwordOne",value:n,onChange:this.onChange,type:"password",placeholder:"Password (6+ characters)",inputStyles:{padding:"8px",fontSize:"16px"},inputClassName:"PasswordMaskInput",buttonStyles:{width:"61px"}}))),s.a.createElement("div",{className:"margin-top-24"},s.a.createElement("button",{id:"noHover",onClick:e=>{this.onSubmit(e)},disabled:r,type:"submit",style:{backgroundColor:this.state.colorChange}},"SIGN UP")))}}const L=()=>s.a.createElement("p",{className:"center margin-top-16 futura-14-300"},"Don't have an account? ",s.a.createElement(l.a,{to:"/sign-up"},"Sign Up")),G=Object(S.a)(c.a,g)(F);var M=R;a(222);class V extends n.Component{render(){return s.a.createElement("div",{className:"center"},s.a.createElement("div",{className:"margin-top-16"},s.a.createElement("div",{className:"flex-row width-100vw"},s.a.createElement("div",{className:"flex-1",style:{maxWidth:"5vw"}}),s.a.createElement("div",{className:"flex-1"},s.a.createElement("div",{className:"flex-row",style:{width:"90vw"}},s.a.createElement("div",{className:"flex-1",style:{textAlign:"left"}},s.a.createElement("a",{href:"/"},s.a.createElement("img",{style:{width:"24px"},src:p.a}))),s.a.createElement("div",{className:"flex-1"},s.a.createElement("div",{className:"home-nav-bar-title futura-20-300 center",style:{width:"80vw"}})))))),s.a.createElement("div",{className:"lead-text margin-top-120"},"APEX PRACTITIONER LOGIN"),s.a.createElement("div",{className:"center flex-1"},s.a.createElement("div",{className:"inline-block margin-top-16"},s.a.createElement(B,{updateUserProfile:this.props.updateUserProfile}))),s.a.createElement("div",{style:{flex:.1}}))}}const Y={email:"",password:"",error:null};class _ extends n.Component{constructor(e){super(e),this.onSubmit=e=>{console.log("sign in button pressed"),console.log(this.props);const t=this.state,a=t.email,n=t.password;this.props.firebase.doSignInWithEmailAndPassword(a,n).then(()=>{this.setState(Object(o.a)({},Y)),this.props.history.push("/videochat")}).catch(e=>{this.setState({error:e})}),e.preventDefault()},this.onChange=e=>{this.setState({[e.target.name]:e.target.value})},this.state=Object(o.a)({},Y)}render(){const e=this.state,t=e.email,a=e.password,n=e.error,r=""===a||""===t;return s.a.createElement("form",{onSubmit:this.onSubmit,className:"si-form margin-top-16"},s.a.createElement("input",{name:"email",value:t,onChange:this.onChange,type:"text",placeholder:"Email Address"}),s.a.createElement("input",{name:"password",value:a,onChange:this.onChange,type:"password",placeholder:"Password"}),s.a.createElement("button",{disabled:r,type:"submit signin-btn",className:"signin-btn"},"Sign In"),s.a.createElement(L,null),n&&s.a.createElement("p",null,n.message))}}const B=Object(S.a)(c.a,g)(_);var X=V,z=a(339),J=a(338);a(223);var H=s.a.createContext(null),K=a(32),q=a.n(K),$=a(51);var Q=e=>{class t extends s.a.Component{constructor(e){super(e),this.state={authUser:null}}componentDidMount(){this.listener=this.props.firebase.auth.onAuthStateChanged(e=>{e?this.setState({authUser:e},()=>{this.addUserProfileToAuthUser()}):this.setState({authUser:null})})}componentWillUnmount(){this.listener()}addUserProfileToAuthUser(){var e=this;return Object($.a)(q.a.mark((function t(){var a,n;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.firebase.doGetUserProfile(e.state.authUser.uid);case 2:a=t.sent,(n=e.state.authUser).userProfile={userProfile:a},e.setState({authUser:n});case 6:case"end":return t.stop()}}),t)})))()}render(){return s.a.createElement(H.Provider,{value:this.state.authUser},s.a.createElement(e,this.props))}}return g(t)};var Z=e=>t=>{class a extends s.a.Component{componentDidMount(){this.listener=this.props.firebase.auth.onAuthStateChanged(t=>{e(t)||this.props.history.push("/signin")})}componentWillUnmount(){this.listener()}render(){return s.a.createElement(H.Consumer,null,a=>e(a)?s.a.createElement(t,this.props):null)}}return Object(S.a)(c.a,g)(a)},ee=(a(225),a(52)),te=a.n(ee);class ae extends n.Component{constructor(e){super(e)}componentDidMount(){window.scrollTo(0,0)}componentDidUpdate(){void 0!==this.props.userProfile&&(window.location.href="/videochat")}getStarted(){console.log("hit hua")}SignIn(){console.log("sign in hit hua")}render(){return s.a.createElement("div",{className:"flex-column center"},s.a.createElement("div",{className:"home-nav-bar"},s.a.createElement("div",{className:"margin-top-12"},s.a.createElement("div",{className:"center"},s.a.createElement("img",{src:te.a,width:"96px"})))),s.a.createElement("div",{className:"flex-1"},s.a.createElement("div",null,s.a.createElement(l.a,{to:"/sign-in",style:{textDecoration:"none",color:"white"}},s.a.createElement("button",{className:"margin-top-64",onClick:e=>{e.stopPropagation(),this.getStarted()}},"PRACTITIONER"))),s.a.createElement("div",{className:"flex-1 margin-top-16"},s.a.createElement("div",null,s.a.createElement(l.a,{to:"/signin",style:{textDecoration:"none",color:"white"}},s.a.createElement("button",{onClick:e=>{e.stopPropagation(),this.getStarted()}},"PATIENT"))))))}}var ne=ae,se=(a(226),a(151)),re=a.n(se);var ie=g(({firebase:e,uid:t,revert:a})=>s.a.createElement("a",{style:{color:"blue",textDecoration:"underline"},onClick:()=>{e.doSignOut(t),window.location.reload()}},"Sign Out"));class oe extends n.Component{constructor(e){super(e)}render(){const e=this.props,t=e.username,a=e.handleUsernameChange,n=e.roomName,r=e.handleRoomNameChange,i=e.handleSubmit;return this.props?s.a.createElement("div",{className:"center"},s.a.createElement("div",{className:"home-nav-bar"},s.a.createElement("div",{className:"margin-top-12"},s.a.createElement("div",{className:"center"},s.a.createElement("img",{src:te.a,width:"96px"})))),s.a.createElement("form",{onSubmit:i},s.a.createElement("div",{className:"margin-top-64 futura-20-900 center"},"Virtual Rehab 1-on-1"),s.a.createElement("div",{className:"inline-block"},s.a.createElement("center",null,s.a.createElement("div",{className:"margin-top-16"},s.a.createElement("input",{type:"text",id:"field",placeholder:"Your Name",value:t,onChange:a,required:!0})),s.a.createElement("div",null,s.a.createElement("input",{type:"text",id:"room",placeholder:"Room Name",value:n,onChange:r,required:!0})))),s.a.createElement("div",{className:"margin-top-8 futura-14-300"},"* Enter the room name you were given from your confirmation email."),s.a.createElement("center",null,s.a.createElement("img",{src:re.a,style:{height:"25vh"}})),s.a.createElement("div",{className:"margin-top-32 futura-14-300"},s.a.createElement(ie,{revert:()=>{this.props.revert()},uid:this.props.uid})),s.a.createElement("div",{className:"onboarding-bottom-nav-bar"},s.a.createElement("button",{style:""===t||""===n?{background:"#E1E2E3"}:null,className:"green-button",type:"submit"},"JOIN VIDEO CALL")))):s.a.createElement("div",null)}}var le=oe,ce=a(24),de=a(152),me=a.n(de);var ue=({participant:e,handleCallDisconnect:t,handleAudioToggle:a,handleVideoToggle:r,toggleAudio:i,toggleVideo:o,isLocal:l})=>{const c=Object(n.useState)([]),d=Object(ce.a)(c,2),m=d[0],u=d[1],h=Object(n.useState)([]),p=Object(ce.a)(h,2),E=p[0],g=p[1],f=Object(n.useRef)(),v=Object(n.useRef)(),b=e=>Array.from(e.values()).map(e=>e.track).filter(e=>null!==e);return Object(n.useEffect)(()=>{u(b(e.videoTracks)),g(b(e.audioTracks));return e.on("trackSubscribed",e=>{"video"===e.kind?u(t=>[...t,e]):g(t=>[...t,e])}),e.on("trackUnsubscribed",e=>{"video"===e.kind?u(t=>t.filter(t=>t!==e)):g(t=>t.filter(t=>t!==e))}),()=>{u([]),g([]),e.removeAllListeners()}},[e]),Object(n.useEffect)(()=>{const e=m[0];if(e)return e.attach(f.current),()=>{e.detach()}},[m]),Object(n.useEffect)(()=>{const e=E[0];if(e)return e.attach(v.current),()=>{e.detach()}},[E]),s.a.createElement("div",null,s.a.createElement("h3",{style:{color:"white"}},e.identity),s.a.createElement("video",{ref:f,autoPlay:!0}),s.a.createElement("audio",{ref:v,autoPlay:!0}))},he=a(74),pe=a(75),Ee=a(153),ge=a.n(Ee),fe=a(154),ve=a.n(fe),be=a(155),we=a.n(be),Ne=a(156),xe=a.n(Ne),Se=a(157),Ce=a.n(Se);function Pe(){const e=Object(he.a)(["\n    max-width: 100%;\n    width: 30px;\n    margin: 0 auto;\n  "]);return Pe=function(){return e},e}function ye(){const e=Object(he.a)(["\n    width: 45px;\n    height: 45px;\n    border-radius: 50%;\n    display: flex;\n    cursor: pointer;\n    :not(:first-child) {\n      margin-left: 20px;\n    }\n  "]);return ye=function(){return e},e}var ke=({handleCallDisconnect:e,handleAudioToggle:t,handleVideoToggle:a,audio:n,video:r})=>s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"control"},s.a.createElement(Oe,{className:"column",onClick:t},s.a.createElement(Ae,{src:n?ge.a:ve.a})),s.a.createElement(Oe,{className:"column",onClick:e},s.a.createElement(Ae,{style:{width:"45px"},src:Ce.a})),s.a.createElement(Oe,{className:"column",onClick:a},s.a.createElement(Ae,{src:r?we.a:xe.a}))));const Oe=pe.a.div(ye()),Ae=pe.a.img(Pe());var Ie=({roomName:e,token:t,handleLogout:a})=>{const r=Object(n.useState)(null),i=Object(ce.a)(r,2),o=i[0],l=i[1],c=Object(n.useState)([]),d=Object(ce.a)(c,2),m=d[0],u=d[1],h=Object(n.useState)(!0),p=Object(ce.a)(h,2),E=p[0],g=p[1],f=Object(n.useState)(!0),v=Object(ce.a)(f,2),b=v[0],w=v[1];Object(n.useEffect)(()=>{const a=e=>{u(t=>[...t,e])},n=e=>{u(t=>t.filter(t=>t!==e))};return me.a.connect(t,{name:e}).then(e=>{l(e),e.on("participantConnected",a),e.on("participantDisconnected",n),e.participants.forEach(a)}),()=>{l(e=>e&&"connected"===e.localParticipant.state?(e.localParticipant.tracks.forEach((function(e){e.track.stop()})),e.disconnect(),null):e)}},[e,t]);const N=()=>{a(),o.disconnect(),window.close()},x=()=>{o.localParticipant.audioTracks.forEach(e=>{e.track.isEnabled?e.track.disable():e.track.enable(),g(e.track.isEnabled)})},S=()=>{o.localParticipant.videoTracks.forEach(e=>{e.track.isEnabled?e.track.disable():e.track.enable(),w(e.track.isEnabled)})},C=m.map(e=>s.a.createElement(ue,{key:e.sid,participant:e,isLocal:!1}));return s.a.createElement("div",{className:"room"},s.a.createElement("div",{className:"local-participant"},o?s.a.createElement(ue,{key:o.localParticipant.sid,participant:o.localParticipant,handleAudioToggle:x,handleVideoToggle:S,handleCallDisconnect:N,toggleAudio:E,toggleVideo:b,isLocal:!0}):""),s.a.createElement("div",{className:"remote-participants"},C),s.a.createElement(ke,{handleCallDisconnect:N,handleAudioToggle:x,handleVideoToggle:S,audio:E,video:b}))};class Ue extends n.Component{constructor(e){var t;super(e),t=this,this.handleUsernameChange=e=>{this.setState({username:e.target.value})},this.handleRoomNameChange=e=>{this.setState({roomName:e.target.value})},this.handleSubmit=function(){var e=Object($.a)(q.a.mark((function e(a){var n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,fetch("/video/token",{method:"POST",body:JSON.stringify({identity:t.state.username,room:t.state.roomName}),headers:{"Content-Type":"application/json"}}).then(e=>e.json());case 3:n=e.sent,t.setState({token:n.token});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.handleLogout=e=>{this.setState({token:null})},this.state={username:"",roomName:"",token:null}}render(){let e;return e=this.state.token?s.a.createElement(Ie,{roomName:this.state.roomName,token:this.state.token,handleLogout:this.handleLogout}):s.a.createElement(le,{uid:this.props.uid,username:this.state.username,roomName:this.state.roomName,handleUsernameChange:this.handleUsernameChange,handleRoomNameChange:this.handleRoomNameChange,handleSubmit:this.handleSubmit}),e}}var Te=Ue;class je extends n.Component{constructor(e){super(e)}render(){return this.props.userProfile?s.a.createElement("div",{className:"app"},s.a.createElement("main",null,s.a.createElement(Te,{uid:this.props.uid.uid,name:this.props.userProfile.name}))):s.a.createElement("div",null)}}var De=Z(e=>!!e)(je);class Re extends n.Component{constructor(e){super(e),this.updateUserProfile=(e,t)=>{const a=this.state.userProfile;a[e]=t,this.setState({userProfile:a});const n=this.props.firebase.auth.currentUser.uid;this.props.firebase.writeData("".concat(n,"/userProfile/"),e,t)},this.updateAppState=(e,t)=>{this.setState({[e]:t})},this.state={}}componentDidUpdate(){this.props.firebase.auth.currentUser&&this.props.firebase.auth.currentUser.userProfile&&!this.state.userProfile&&this.setState({userProfile:this.props.firebase.auth.currentUser.userProfile.userProfile})}render(){return s.a.createElement(z.a,null,s.a.createElement("div",null,s.a.createElement(J.a,{exact:!0,path:"/videochat",render:e=>s.a.createElement(De,{uid:this.props.firebase.auth.currentUser,userProfile:this.state.userProfile,appState:this.state})}),s.a.createElement(J.a,{exact:!0,path:"/",render:e=>s.a.createElement(ne,{userProfile:this.state.userProfile,appState:this.state})}),s.a.createElement(J.a,{exact:!0,path:"/signup",render:e=>s.a.createElement(A,{userProfile:this.state.userProfile,updateUserProfile:this.updateUserProfile,updateAppState:this.updateAppState})}),s.a.createElement(J.a,{exact:!0,path:"/signin",render:e=>s.a.createElement(D,{updateUserProfile:this.updateUserProfile})}),s.a.createElement(J.a,{exact:!0,path:"/sign-up",render:e=>s.a.createElement(M,{userProfile:this.state.userProfile,updateUserProfile:this.updateUserProfile,updateAppState:this.updateAppState})}),s.a.createElement(J.a,{exact:!0,path:"/sign-in",render:e=>s.a.createElement(X,{updateUserProfile:this.updateUserProfile})})))}}var We=Q(Re);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Fe=w;i.a.render(s.a.createElement(f.Provider,{value:new Fe},s.a.createElement(We,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},52:function(e,t,a){e.exports=a.p+"static/media/logo_webbanner.1f2ecda3.png"}},[[162,1,2]]]);
//# sourceMappingURL=main.418298f8.chunk.js.map